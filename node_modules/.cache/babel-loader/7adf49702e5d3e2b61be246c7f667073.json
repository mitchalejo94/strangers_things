{"ast":null,"code":"// import Register from \"./Register\"\nexport const URL = \"https://strangers-things.herokuapp.com/api/2207-FTB-ET-WEB-PT\";\nconst makeHeaders = token => {\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  return headers;\n};\nconst callAPI = async function (endpointPath) {\n  let defaultOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    token,\n    method,\n    body\n  } = defaultOptions;\n  const options = {\n    headers: makeHeaders(token)\n  };\n  if (method) {\n    options.method = method;\n  }\n  if (body) {\n    options.body = JSON.stringify(body);\n  }\n  const response = await fetch(`${URL}${endpointPath}`, options);\n  const result = await response.json();\n  return result;\n};\nexport async function fetchPosts() {\n  try {\n    const data = await fetch(`${URL}/posts`);\n    const result = await data.json();\n    return result;\n  } catch (error) {}\n}\n// export async function NewPost(token, details) {\n\n//     //* might need to be in a try catch\n//         const response = await fetch (`${apiKey}${cohortName}/posts`,{\n//             method:\"POST\",\n//             headers:{\n//                 \"Content-Type\": \"application/json\",\n//                 Authorization: `Bearer ${token}`,\n//             },\n//             body: JSON.stringify({\n//                 post:{\n//                     title:details.title,\n//                     description: details.description,\n//                     location: details.location,\n//                     price: details.price,\n//                     willDeliver: details.willDeliver\n//                 }\n//             })\n//         }).then((response => response.json()))\n//         .then(result => {\n//           console.log(result)\n//         })\n//         .catch(console.error)\n//     }\nexport const NewPost = async (token, title, description, price, location, willDeliver) => {\n  try {\n    const post = {\n      description: description\n    };\n    if (location) {\n      post.location = location;\n    }\n    if (price) {\n      post.price = price;\n    }\n    if (willDeliver) {\n      post.willDeliver = willDeliver;\n    }\n    const {\n      success,\n      error,\n      data\n    } = await callAPI('/posts', {\n      token: token,\n      method: \"POST\",\n      body: {\n        post: {\n          title,\n          description,\n          price,\n          location,\n          willDeliver\n        }\n      }\n    });\n    if (success) {\n      return {\n        error: null,\n        post: data.post\n      };\n    } else {\n      return {\n        error: error.message,\n        post: null\n      };\n    }\n  } catch (error) {\n    console.error('Post /posts failed:', error);\n    return {\n      error: 'Failed to create Post',\n      post: null\n    };\n  }\n};\n\n//     const response = await fetch(`${apiKey}${cohortName}/posts`, {\n//     method: \"POST\",\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//       Authorization: `Bearer ${token}`,\n//     },\n//     body: JSON.stringify({\n//         post: {\n//             title:details.title,\n//             description: details.description,\n//             location: details.location,\n//             price: details.price,\n//             willDeliver: details.willDeliver\n//         }\n//     })\n//   }).then (response=>response.json ())\n//   .then(result =>{\n//     console.log(result);\n//   }).catch(console.error)\n_c = NewPost;\nexport async function createUser(username, password) {\n  try {\n    const response = await fetch(`${URL}/users/register`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password\n        }\n      })\n    });\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\nexport async function loginUser(username, password) {\n  try {\n    const response = await fetch(`${URL}/users/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password\n        }\n      })\n    });\n    console.log(response, \"response\");\n    const data = await response.json();\n    console.log(data, \"data\");\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"NewPost\");","map":{"version":3,"names":["URL","makeHeaders","token","headers","callAPI","endpointPath","defaultOptions","method","body","options","JSON","stringify","response","fetch","result","json","fetchPosts","data","error","NewPost","title","description","price","location","willDeliver","post","success","message","console","createUser","username","password","user","loginUser","log"],"sources":["/Users/mitchelalejo/Desktop/Cohort2207/Week13/StrangersThings/src/api/api.js"],"sourcesContent":["// import Register from \"./Register\"\nexport const URL = \"https://strangers-things.herokuapp.com/api/2207-FTB-ET-WEB-PT\"\n\n\nconst makeHeaders = (token) => {\n    const headers =  {\n        'Content-Type': 'application/json'\n    };\n    \n    if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n    }\n    return headers;\n};\n\nconst callAPI = async (endpointPath, defaultOptions={}) => {\n    const {token, method, body} = defaultOptions;\n    \n    const options = {\n        headers: makeHeaders(token),\n    };\n    \n    if (method) {\n        options.method = method;\n    }\n    \n    if (body) {\n        options.body = JSON.stringify(body);\n    }\n    \n    const response = await fetch(`${URL}${endpointPath}`, options);\n    const result = await response.json();\n    \n    return result;\n};\nexport async function fetchPosts() {\n  try {\n    const data = await fetch(`${URL}/posts`);\n    const result = await data.json();\n    return result;\n  } catch (error) {}\n}\n// export async function NewPost(token, details) {\n    \n    //     //* might need to be in a try catch\n    //         const response = await fetch (`${apiKey}${cohortName}/posts`,{\n        //             method:\"POST\",\n        //             headers:{\n            //                 \"Content-Type\": \"application/json\",\n//                 Authorization: `Bearer ${token}`,\n//             },\n//             body: JSON.stringify({\n//                 post:{\n//                     title:details.title,\n//                     description: details.description,\n//                     location: details.location,\n//                     price: details.price,\n//                     willDeliver: details.willDeliver\n//                 }\n//             })\n//         }).then((response => response.json()))\n//         .then(result => {\n//           console.log(result)\n//         })\n//         .catch(console.error)\n//     }\nexport const NewPost = async (token, title, description, price, location, willDeliver) => {\n\n    try {\n      const post = {\n        description: description\n      };\n  \n      if (location) {\n        post.location = location;\n      }\n  \n      if (price) {\n        post.price = price;\n      }\n  \n      if (willDeliver) {\n        post.willDeliver = willDeliver;\n      }\n  \n      const {success, error, data} = await callAPI('/posts', {\n        token: token,\n        method: \"POST\",\n        body: {\n          post: {\n          title,\n          description,\n          price,\n          location,\n          willDeliver\n          }\n        }\n        \n      });\n  \n      if (success) {\n        return {\n          error: null,\n          post: data.post\n        };\n      } else {\n        return {\n          error: error.message,\n          post: null\n        };\n      }\n    } catch (error) {\n      console.error('Post /posts failed:', error);\n  \n      return {\n        error: 'Failed to create Post',\n        post: null\n      }\n    }\n  };\n\n\n//     const response = await fetch(`${apiKey}${cohortName}/posts`, {\n//     method: \"POST\",\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//       Authorization: `Bearer ${token}`,\n//     },\n//     body: JSON.stringify({\n//         post: {\n//             title:details.title,\n//             description: details.description,\n//             location: details.location,\n//             price: details.price,\n//             willDeliver: details.willDeliver\n//         }\n//     })\n//   }).then (response=>response.json ())\n//   .then(result =>{\n//     console.log(result);\n//   }).catch(console.error)\n\n\nexport async function createUser(username, password) {\n  try {\n    const response = await fetch(`${URL}/users/register`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password,\n        },\n      }),\n    });\n    const data = await response.json()\n    return data\n\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function loginUser(username, password) {\n  try {\n    const response = await fetch(`${URL}/users/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password,\n        },\n      }),\n    });\n    console.log(response, \"response\");\n    const data = await response.json()\n    console.log(data, \"data\");\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}